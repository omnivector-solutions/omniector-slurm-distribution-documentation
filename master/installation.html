
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Installation overview &#8212; Omnivector Slurm Distribution  documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Operations" href="operations/overview.html" />
    <link rel="prev" title="OSD Architecture" href="architecture.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Omnivector Slurm Distribution  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="architecture.html">
   OSD Architecture
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Installation overview
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="operations/overview.html">
   Operations Overview
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="operations/nodes.html">
     Nodes operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="operations/partitions.html">
     Partitions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="operations/infiniband.html">
     Infiniband
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="operations/nhc.html">
     NHC
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="operations/backup-restore.html">
     Backup and restore the slurm database
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="operations/upgrading-osd.html">
     Upgrade OSD
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="configuration/configuration.html">
   Configuration and Administration
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="configuration/slurmd.html">
     slurmd
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="configuration/slurmdbd.html">
     slurmdbd
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="configuration/slurmctld.html">
     slurmctld
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="configuration/slurmrestd.html">
     slurmrestd
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="changelog.html">
   Changelog
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/installation.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/omnivector-solutions/osd-documentation/"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/omnivector-solutions/osd-documentation//issues/new?title=Issue%20on%20page%20%2Finstallation.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-juju">
   Install Juju
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup-cloud">
   Setup cloud
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aws">
     AWS
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#login-to-a-juju-controller">
       Login to a juju controller
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#add-a-model">
       Add a model
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lxd">
     LXD
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#bootstrap-a-localhost-lxd-juju-controller">
       Bootstrap a localhost LXD Juju controller
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#centos7-deploys-on-lxd-clouds">
         CentOS7 Deploys on LXD clouds
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Add a model
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#maas">
     MAAS
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Login to a juju controller
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id3">
       Add a model
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deploy-slurm">
   Deploy Slurm
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#local-charms">
     Local charms
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="installation-overview">
<span id="installation"></span><h1>Installation overview<a class="headerlink" href="#installation-overview" title="Permalink to this headline">¶</a></h1>
<p>The OSD can be installed on a cloud of your choosing. The only common component
used across deployments is <a class="reference external" href="https://juju.is">juju</a> itself.  You must have the juju client
installed on your local system in order to administer the installation and
deployment of the Slurm charms.</p>
<div class="section" id="install-juju">
<h2>Install Juju<a class="headerlink" href="#install-juju" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo snap install juju --classic
</pre></div>
</div>
<p>Once the juju client is installed you will be ready to proceed with deploying
Slurm to a cloud of your choosing.</p>
</div>
<div class="section" id="setup-cloud">
<h2>Setup cloud<a class="headerlink" href="#setup-cloud" title="Permalink to this headline">¶</a></h2>
<p>Follow the documentation for the cloud you with to deploy Slurm on:</p>
<div class="section" id="aws">
<h3>AWS<a class="headerlink" href="#aws" title="Permalink to this headline">¶</a></h3>
<div class="section" id="login-to-a-juju-controller">
<h4>Login to a juju controller<a class="headerlink" href="#login-to-a-juju-controller" title="Permalink to this headline">¶</a></h4>
<p>In any deployment scenario we will need to be logged into a juju controller.
For this example we will login to the public juju controller, Jaas.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ juju login jaas
</pre></div>
</div>
</div>
<div class="section" id="add-a-model">
<h4>Add a model<a class="headerlink" href="#add-a-model" title="Permalink to this headline">¶</a></h4>
<p>Once you are logged into a juju controller you need to add a model. Run the
following command to add the model that will house the OSD.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ juju add-model slurm aws/us-west-2
</pre></div>
</div>
</div>
</div>
<div class="section" id="lxd">
<h3>LXD<a class="headerlink" href="#lxd" title="Permalink to this headline">¶</a></h3>
<div class="section" id="bootstrap-a-localhost-lxd-juju-controller">
<h4>Bootstrap a localhost LXD Juju controller<a class="headerlink" href="#bootstrap-a-localhost-lxd-juju-controller" title="Permalink to this headline">¶</a></h4>
<p>In any deployment scenario we will need to be logged into a juju controller.
For this example we will bootstrap a juju controller in a LXD container on our
local machine.</p>
<p>Install and configure LXD, if you haven't already:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo snap install lxd
$ lxd init --auto
$ lxc network <span class="nb">set</span> lxdbr0 ipv6.address none
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Juju does not support IPv6, the last command disables it.</p>
</div>
<p>You can now bootstrap your local cloud:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ juju bootstrap localhost
</pre></div>
</div>
<p>Following a successful bootstrap, <code class="docutils literal notranslate"><span class="pre">juju</span> <span class="pre">controllers</span></code> will show your newly
provisioned lxd controller.</p>
<div class="section" id="centos7-deploys-on-lxd-clouds">
<h5>CentOS7 Deploys on LXD clouds<a class="headerlink" href="#centos7-deploys-on-lxd-clouds" title="Permalink to this headline">¶</a></h5>
<p>You need to manually create an LXD image for CentOS7 in order to deploy it with
Juju.</p>
<p>First step is to download a configuration file describing the image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ wget https://raw.githubusercontent.com/lxc/lxc-ci/master/images/centos.yaml
</pre></div>
</div>
<p>Juju needs two extra packages (<cite>sudo</cite> and <cite>openssh-server</cite>) that are not in the
base image. You need to manually add them in the <cite>packages</cite> section of the yaml
file. The first <cite>set</cite> of packages in the file should then be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>packages:
  manager: yum
  update: <span class="nb">true</span>
  cleanup: <span class="nb">true</span>
  sets:
  - packages:
    - cronie
    - cronie-noanacron
    - curl
    - dhclient
    - initscripts
    - openssh-clients
    - passwd
    - policycoreutils
    - rootfiles
    - rsyslog
    - vim-minimal
    - sudo
    - openssh-server
    action: install
</pre></div>
</div>
<p>Now we need to install <cite>distrobuilder</cite> and generate the image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo snap install distrobuilder --classic
$ sudo distrobuilder build-lxd centos.yaml -o image.architecture<span class="o">=</span>x86_64 -o image.release<span class="o">=</span><span class="m">7</span> -o image.variant<span class="o">=</span>cloud
</pre></div>
</div>
<p>To make this new image available to Juju, we need to import it with an alias:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ lxc image import lxd.tar.xz rootfs.squashfs --alias juju/centos7/amd64
</pre></div>
</div>
<p>You can check that the image was correctly imported to LXD with
<code class="docutils literal notranslate"><span class="pre">lxc</span> <span class="pre">image</span> <span class="pre">list</span></code>. To test it works with Juju, you can
<code class="docutils literal notranslate"><span class="pre">juju</span> <span class="pre">add-machine</span> <span class="pre">--series</span> <span class="pre">centos7</span></code>.</p>
</div>
</div>
<div class="section" id="id1">
<h4>Add a model<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Once you have created your juju controller you need to add a model. Run the
following command to add the model that will house the OSD.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ juju add-model slurm
</pre></div>
</div>
</div>
</div>
<div class="section" id="maas">
<h3>MAAS<a class="headerlink" href="#maas" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id2">
<h4>Login to a juju controller<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>If you don't already have a juju controller, bootstrap juju by creating a juju
controller machine.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ juju bootstrap
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h4>Add a model<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>Once you are logged into a juju controller you need to add a model. Run the
following command to add the model that will house the OSD.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ juju add-model slurm
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="deploy-slurm">
<h2>Deploy Slurm<a class="headerlink" href="#deploy-slurm" title="Permalink to this headline">¶</a></h2>
<p>Now it is time to get Slurm :)</p>
<p>We provide a bundle and overlays to simplify deploying all the components
needed for a complete Slurm cluster in the repository <a class="reference external" href="https://github.com/omnivector-solutions/slurm-bundles">slurm-bundles</a>. First, clone the
repository and then enter it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/omnivector-solutions/slurm-bundles
$ <span class="nb">cd</span> slurm-bundles
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">slurm-core</span></code> directory contains all the bundles and overlays to deploy a
basic Slurm cluster:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">slurm-core/bundle.yaml</span></code>: the basic definition of the Slurm components.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slurm-core/clouds/</span></code>: overlays with specific settings for each supported
cloud environment. Currently available ones are AWS and LXD.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slurm-core/series/</span></code>: overlays to define the OS of the Slurm components,
the possible options are CentOS7 and Ubuntu Focal (20.04).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slurm-core/charms/</span></code>: overlays to change the source of the charm. By
default, the bundle gets the <code class="docutils literal notranslate"><span class="pre">latest/stable</span></code> channel from Charmhub. The
overlays in this directory allows ut to change the source to either
<code class="docutils literal notranslate"><span class="pre">latest/edge</span></code> channel or from your local machine. The latter one is
specially useful for development.</p></li>
</ul>
<p>For example, to deploy Slurm to a local LXD cloud, on Ubuntu Focal, using the
<code class="docutils literal notranslate"><span class="pre">latest/stable</span></code> charms:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ juju deploy ./slurm-core/bundle.yaml <span class="se">\</span>
              --overlay ./slurm-core/clouds/lxd.yaml <span class="se">\</span>
              --overlay ./slurm-core/series/focal.yaml
</pre></div>
</div>
<p>Juju will then download the charms from Charmhub, create the applications,
configurations, and LXD containers described in the respective files, which
will comprise the model.</p>
<p>It will take a moment get everything ready. You can check the status of your
model with juju's status:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ watch -n <span class="m">1</span> -c juju status --color

Model    Controller  Cloud/Region         Version  SLA          Timestamp
default  overlord    localhost/localhost  <span class="m">2</span>.8.7    unsupported  <span class="m">17</span>:44:29Z

App              Version  Status  Scale  Charm            Store       Channel  Rev  OS      Message
percona-cluster  <span class="m">5</span>.7.20   active      <span class="m">1</span>  percona-cluster  charmstore  stable   <span class="m">293</span>  ubuntu  Unit is ready
slurmctld        <span class="m">0</span>.6.4    active      <span class="m">1</span>  slurmctld        charmhub    stable     <span class="m">7</span>  ubuntu  slurmctld available
slurmd           <span class="m">0</span>.6.4    active      <span class="m">1</span>  slurmd           charmhub    stable    <span class="m">13</span>  ubuntu  slurmd available
slurmdbd         <span class="m">0</span>.6.4    active      <span class="m">1</span>  slurmdbd         charmhub    stable     <span class="m">5</span>  ubuntu  slurmdbd ready
slurmrestd       <span class="m">0</span>.6.4    active      <span class="m">1</span>  slurmrestd       charmhub    stable     <span class="m">5</span>  ubuntu  slurmrestd available

Unit                   Workload  Agent  Machine  Public address  Ports     Message
percona-cluster/0*     active    idle   <span class="m">0</span>        <span class="m">10</span>.34.166.18    <span class="m">3306</span>/tcp  Unit is ready
slurmctld/0*           active    idle   <span class="m">2</span>        <span class="m">10</span>.34.166.222             slurmctld available
slurmd/0*              active    idle   <span class="m">3</span>        <span class="m">10</span>.34.166.219             slurmd available
slurmdbd/0*            active    idle   <span class="m">4</span>        <span class="m">10</span>.34.166.218             slurmdbd available
slurmrestd/0*          active    idle   <span class="m">5</span>        <span class="m">10</span>.34.166.66              slurmrestd available

Machine  State    DNS            Inst id        Series  AZ  Message
<span class="m">0</span>        started  <span class="m">10</span>.34.166.18   juju-01ab62-0  bionic      Running
<span class="m">2</span>        started  <span class="m">10</span>.34.166.222  juju-01ab62-2  focal       Running
<span class="m">3</span>        started  <span class="m">10</span>.34.166.219  juju-01ab62-3  focal       Running
<span class="m">4</span>        started  <span class="m">10</span>.34.166.218  juju-01ab62-4  focal       Running
<span class="m">5</span>        started  <span class="m">10</span>.34.166.66   juju-01ab62-5  focal       Running
</pre></div>
</div>
<p>Once the workload status is <em>active</em> and the agent status is <em>idle</em>, the SLURM
cluster is ready for use.</p>
<p>You can see the status of your cluster by running the <code class="docutils literal notranslate"><span class="pre">sinfo</span></code> command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ juju run --unit slurmcltd/0 sinfo
PARTITION         AVAIL  TIMELIMIT  NODES  STATE NODELIST
juju-compute-GsLk    up   infinite      <span class="m">1</span>   down juju-01ab62-3
</pre></div>
</div>
<p>The nodes start in <em>down</em> state with a <code class="docutils literal notranslate"><span class="pre">Reason</span> <span class="pre">=</span> <span class="pre">New</span> <span class="pre">node</span></code>, so when you add
more nodes to the cluster, they will not execute the jobs from que queue. This
way it is possible to do some post installation before setting the nodes as
<em>idle</em>. You can double check that your nodes are down because of this and not
some other reason with <code class="docutils literal notranslate"><span class="pre">sinfo</span> <span class="pre">-R</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ juju run --unit slurmcltd/0 <span class="s2">&quot;sinfo -R&quot;</span>
REASON               USER      TIMESTAMP           NODELIST
New node             root      <span class="m">2021</span>-03-09T20:24:09 ip-172-31-83-4
</pre></div>
</div>
<p>After setting the node up, to bring it back you need to run a Juju <em>action</em>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ juju run-action slurmd/1 node-configured
$ juju run --unit slurmcltd/0 sinfo
PARTITION         AVAIL  TIMELIMIT  NODES  STATE NODELIST
juju-compute-GsLk    up   infinite      <span class="m">1</span>   idle juju-01ab62-3
</pre></div>
</div>
<p>Please refer to our <a class="reference internal" href="operations/overview.html#operations"><span class="std std-ref">Operations</span></a> section for detailed instructions on how
to manage the cluster.</p>
<div class="section" id="local-charms">
<h3>Local charms<a class="headerlink" href="#local-charms" title="Permalink to this headline">¶</a></h3>
<p>First we need to build a <em>charm</em>. That's what Juju will deploy to our cloud.
Charms are built with <code class="docutils literal notranslate"><span class="pre">charmcraft</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo snap install --edge charmcraft
</pre></div>
</div>
<p>Clone the <a class="reference external" href="https://github.com/omnivector-solutions/slurm-charms">slurm-charms</a>
git repository, it contains all the nuts and bolts to build the charms and then
invoke the <cite>make charms</cite> command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/omnivector-solutions/slurm-charms
$ <span class="nb">cd</span> slurm-charms
$ make charms
</pre></div>
</div>
<p>Now you can use the <code class="docutils literal notranslate"><span class="pre">slurm-core/charms/local-development.yaml</span></code> overlay for
your bundle.</p>
</div>
</div>
</div>


              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="architecture.html" title="previous page">OSD Architecture</a>
    <a class='right-next' id="next-link" href="operations/overview.html" title="next page">Operations</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Omnivector Solutions<br/>
        
            &copy; Copyright 2021, Omnivector Solutions.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>