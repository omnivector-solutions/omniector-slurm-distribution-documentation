
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Upgrade OSD &#8212; Omnivector Slurm Distribution 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Backup and restore the slurm database" href="backup-restore.html" />
    <link rel="prev" title="slurm-configurator" href="configuration/slurm-configurator.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="upgrade-osd">
<span id="operations-upgrading-osd"></span><h1>Upgrade OSD<a class="headerlink" href="#upgrade-osd" title="Permalink to this headline">¶</a></h1>
<p>OSD upgrades can happen at two different levels; 1) the upgrading of the operations (charm code), 2) the
upgrading of the underlying slurm snap resource (the slurm process itself).</p>
<p>If the desired affect is to upgrade the ops code, upgrade the charms. In the case that you want
to update the running slurm process itself, you will want to upgrade the snap.</p>
<div class="section" id="charm-upgrades">
<h2>Charm Upgrades<a class="headerlink" href="#charm-upgrades" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>To upgrade the operations code, the slurm charms, you can follow the example</dt>
<dd>(the order in which charms are upgraded does not matter here):</dd>
</dl>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> application in slurmctld <span class="se">\</span>
                   slurmd <span class="se">\</span>
                   slurmdbd <span class="se">\</span>
                   slurmrestd <span class="se">\</span>
                   slurm-configurator<span class="p">;</span> <span class="k">do</span>

    juju upgrade-charm <span class="nv">$application</span>

<span class="k">done</span>
</pre></div>
</div>
<p>Juju will reach out to the charmhub and pull down the latest charm code (if a more recent revisions exists
then what is running on the machine) and run the <code class="docutils literal notranslate"><span class="pre">upgrade-charm</span></code> hook event.</p>
</div>
<div class="section" id="snap-upgrades">
<h2>Snap Upgrades<a class="headerlink" href="#snap-upgrades" title="Permalink to this headline">¶</a></h2>
<p>The slurm snap can be upgraded via the slurm charms in a number of ways:</p>
<p>1) Attach a new resource to the charms.
The slurm charms will always use a supplied resource if available. To upgrade the running slurm snap
to a later version, attach the snap resource to the charm as follows.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> application in slurmctld <span class="se">\</span>
                   slurmd <span class="se">\</span>
                   slurmdbd <span class="se">\</span>
                   slurmrestd <span class="se">\</span>
                   slurm-configurator<span class="p">;</span> <span class="k">do</span>

    juju attach <span class="nv">$application</span> slurm-resource<span class="o">=</span>slurm-snap.resource

<span class="k">done</span>
</pre></div>
</div>
<p>In the case you want to upgrade the snap and the charm simultaneously, you can run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> application in slurmctld <span class="se">\</span>
                   slurmd <span class="se">\</span>
                   slurmdbd <span class="se">\</span>
                   slurmrestd <span class="se">\</span>
                   slurm-configurator<span class="p">;</span> <span class="k">do</span>

    juju upgrade-charm <span class="nv">$application</span> <span class="se">\</span>
        --resource slurm-resource<span class="o">=</span>slurm-snap.resource

<span class="k">done</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Omnivector Slurm Distribution</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/overview.html">Installation Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="overview.html">Operations Overview</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html#configuration">Configuration</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="overview.html#upgrade">Upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#backup-restore">Backup/Restore</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../design/overview.html">Design Overview</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="overview.html">Operations</a><ul>
      <li>Previous: <a href="configuration/slurm-configurator.html" title="previous chapter">slurm-configurator</a></li>
      <li>Next: <a href="backup-restore.html" title="next chapter">Backup and restore the slurm database</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Omnivector Solutions.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/operations/upgrading-osd.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>