
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Design &#8212; Omnivector Slurm Distribution 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Backup and restore the slurm database" href="../operations/backup-restore.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="design">
<span id="id1"></span><h1>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h1>
<p>OSD focuses on <cite>loosly</cite> coupling automation and service discovery with the operating of
slurm itself. The reason behind <cite>loosly</cite> coupling the automation with slurm operations is
because more often then not the operators and administrators of slurm will need to
have some level of interaction with the cluster before lifecycle operations take place. If the
ops code was <cite>tightly</cite> coupled with the application workload (in this context, slurm) it would prevent
an operator from being able to perform manual operations commonly needed in and out of cluster lifecycle.</p>
<p>In codifying operations, the right balance of automation and operator interaction is often difficult to find.</p>
<p>With this said, a great deal of automation does exist in OSD, purposefully built to <em>aid</em> administrators
in the operation of slurm.</p>
<p>We have taken a similar approach in the delivery of the slurm process in that OSD will facilitate the
provisioining of either a slurm snap or tarball. In this way, OSD provides the bindings that enable operators to
lean on our upstream builds or bring their own build of slurm. Whichever it is, OSD will automate the process
of distributing, installing (or upgrading) and configuring slurm - things that are obviously automatable but not
necessarily opinionated.</p>
<div class="section" id="packaging-and-delivery">
<h2>Packaging and Delivery<a class="headerlink" href="#packaging-and-delivery" title="Permalink to this headline">¶</a></h2>
<p>One of the core efficiencies in OSD is the packaging and distribution of slurm as a <a class="reference external" href="https://snapcraft.io/about">snapped</a> process.
Distributing slurm as a snap enables OSD to provide lightweight, idempotent, hardened slurm builds that work across operating systems.</p>
<p>OSD provisions slurm by means of installing the slurm snap on each slurm component node in the cluster (default).</p>
<p>This behavior can be changed to allow users to bring their own slurm builds by means of providing a user supplied <a class="reference external" href="https://discourse.charmhub.io/t/using-resources-developer-guide/1127">resource</a>.
A user supplied resource can be in the format of a <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> or <code class="docutils literal notranslate"><span class="pre">.snap</span></code> file. A user can supply a tar or snap resource
and OSD will figure out how to install and configure slurm based on the type of resource that has been provided. For example, if a snap resource
is provided, OSD will know to configure slurm using snap primitives. Similarly, if a tarball resource is provided, OSD will know
the correct place to put things in order to appropriately configure and run the components of slurm at the OS level, using systemd.
OSD determines the type of resource provided and in turn uses the correct installation, configuration and lifecycle operations for that resource; snap or tarball.</p>
<p>Supported user provided slurm resources are:</p>
<blockquote>
<div><ul class="simple">
<li>slurm snap</li>
<li>slurm tarball</li>
</ul>
</div></blockquote>
<p>Find the slurm snap homepage on the <a class="reference external" href="https://snapcraft.io/slurm">snapstore</a>.</p>
<p>Contribute to the slurm snap development on <a class="reference external" href="https://github.com/omnivector-solutions/snap-slurm">github</a>.</p>
</div>
<div class="section" id="lifecycle-automation">
<h2>Lifecycle Automation<a class="headerlink" href="#lifecycle-automation" title="Permalink to this headline">¶</a></h2>
<p>A short list of thoughtfully curated lifecycle operations automated by OSD.</p>
<ul class="simple">
<li>Adding and removing nodes from a cluster partition</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Powering physical or virtual machine resources on or off</li>
<li>Operating system installation</li>
<li>Network setup and configuration</li>
<li>Disk partitioning and other storage configuration</li>
<li>Installation of slurm</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Generating node and partition configuration</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>When a machine resource is added to a partition the <code class="docutils literal notranslate"><span class="pre">slurm.conf</span></code> <cite>Node</cite> and <cite>Partition</cite> configuration are generated for the machine and partition</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><dl class="first docutils">
<dt>Composition and distribution of <code class="docutils literal notranslate"><span class="pre">slurm.conf</span></code></dt>
<dd><ul class="first last">
<li>Discover and aggregate node level inventory information<ul>
<li>node name</li>
<li>node addr</li>
<li>node state</li>
<li>real memory</li>
<li>num cpus</li>
<li>threads per core</li>
<li>cores per socket</li>
<li>sockets per board</li>
</ul>
</li>
<li>Partition configuration<ul>
<li>node inventory</li>
<li>partition name</li>
<li>partition state</li>
<li>partition config</li>
</ul>
</li>
<li>User defined configuration<ul>
<li>Seed your own configuration into the <code class="docutils literal notranslate"><span class="pre">slurm.conf</span></code></li>
<li>Regeneration and redistribution of configuration based on diff from previous config</li>
</ul>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Find more on slurm lifecycle operations in the OSD operations documentation:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../operations/overview.html">Operations</a></li>
</ul>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Omnivector Slurm Distribution</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/overview.html">Installation Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/overview.html">Operations Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Design Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#packaging-and-delivery">Packaging and Delivery</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lifecycle-automation">Lifecycle Automation</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../operations/backup-restore.html" title="previous chapter">Backup and restore the slurm database</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Omnivector Solutions.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/design/overview.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>