.. _gpu:

===========
GPU Support
===========

OSD supports installing GPU drivers for the compute nodes via a set of Juju
Actions.

We currently support Nvidia GPUs only.

Nvidia
======

The ``slurmd`` charm provides an ``install-nvidia`` action to install the
Nvidia drivers easily:

.. code-block:: bash

   $ juju run-action slurmd/leader install-nvidia

This action, by default, pulls the latest drivers from official Nvidia
repositories. If you need to install older drivers, you should specify them
with the action ``nvidia-package`` _before_ installing the drivers:

.. code-block:: bash

   $ juju run-action slurmd/leader nvidia-package package="nvidia-driver-branch-470" # for CentOS7
   $ juju run-action slurmd/leader nvidia-package package="cuda-drivers-470" # for Ubuntu 20.04
   $ juju run-action slurmd/leader install-nvidia

Please check the official `Nvidia documentation about compatibility
<https://docs.nvidia.com/deploy/cuda-compatibility/#faq>`_ before installing
the drivers.

After installing GPU Drivers, one should reboot them. Check
:ref:`rebooting-nodes` section for details on how to do that.
